int vib_pin=7;
int led_pin=5;
int chipSelect=10;

void setup() {
 pinMode(vib_pin,INPUT);
 pinMode(led_pin,OUTPUT);
 Serial.begin(9600);
 if (!SD.begin(chipSelect)) {
     Serial.println("SD card initialization failed");
     while (1);
   }
   Serial.println("SD card initialized");
}

void loop() {
 int val;
 val=digitalRead(vib_pin);
 File dataFile = SD.open("vibdata.csv", FILE_WRITE);
 if (datafile) {
    datafile.print(val);
    datafile.println();
    datafile.close();
  } else {
    Serial.println("Could not open file");
  }
 if(val==1) {
   digitalWrite(led_pin,HIGH);
   Serial.println(val);
   delay(1000);
   digitalWrite(led_pin,LOW);
   delay(1000);
  }
 else {
   digitalWrite(led_pin,LOW);
   Serial.println(val);
   Serial.println("Could not open file");
  }
}
